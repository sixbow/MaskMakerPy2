# -*- coding: utf-8 -*-
"""
Created on Mon Oct 03 16:46:40 2016

@author: sebastian
"""

from ..script import *
from PyClewin import *
from .ucs import *
from .wires import poly

def introfont(**kwargs):
    gg.w('(CleFont -2048 0 0 0 0 16777216 536870919 1634300481 108 0 0 0 0 0 0);\n')
    transform_str = kwargs.pop('transform', '0 0 0')
    gg.w('(CleTransform 0 1072693248 0 0 0 0 0 1072693248 0 %s);\n' %transform_str)

class text():
    def __init__(self, direction, string, height = 100, **kwargs):
        self.kwargs = kwargs
        self.height = height
        self.direction = direction
        self.charspace = self.height*0.1
        self.spacespace = self.height*0.7

        self.string = string.upper()
        self.lentotal = len(string)
        self.numchars = len(string.replace(" ", ""))
        self.writetext()

    multipolychar = ['=']

    def writetext(self):
        introfont(**self.kwargs)
        gg.w('(CleText {:d} {:d} {:d} {:d} {:d} {});\n'.format(int(gg.cle[0]*gg.scale), int(gg.cle[1]*gg.scale), self.lentotal, int(self.height*gg.scale), self.lentotal, self.string))
        setmark('textstart')
        rot(self.direction)
        go(0, - self.height/2.)
        for char in self.string:
            go(self.charspace, 0)
            if char == ' ':
                go(self.spacespace, 0)
            elif char in self.multipolychar:
                for chi in self.charpoly(char):
                    poly(chi)
                go(self.width, 0)
            else:
                poly(self.charpoly(char))
                go(self.width, 0)
        gomark('textstart')


    height00 = 1000
    char00 = {'A' : '450205 894952 450205 1000000 524557 1000000 933834 0 783083 0 666439 302865 248295 302865 138472 0 -2046 0 381992 1000000 450205 1000000 450205 894952 439291 846521 427012 798772 412688 751023 396317 703956 286494 410641 625512 410641 521146 687585 498636 747613 479536 802183 463165 851296',
              'B' : '234652 881992 234652 1000000 477490 1000000 531378 997954 580491 991814 623465 982265 660982 969304 693724 951569 722374 930423 747613 905184 769441 875853 786494 843793 798772 811050 806276 777626 809004 744202 806276 712142 800136 681446 789222 652115 774216 623465 754434 596180 730559 572306 701910 550477 669168 532060 711460 516371 748977 495907 781037 470668 808322 441337 829468 407231 845157 371078 854025 331514 857435 289905 855389 255116 849932 221692 840382 189632 827422 158936 811733 130286 793997 105730 774898 83902 754434 66166 730559 50477 704638 36835 675989 25239 644611 16371 609823 8868 571623 4093 529332 682 483629 0 102319 0 102319 1000000 234652 1000000 234652 881992 234652 579809 234652 461801 234652 118008 512960 118008 538199 118690 557981 120055 573670 122783 595498 127558 615280 133697 633697 141201 650068 150068 664393 160300 678035 173261 689632 188267 700546 205321 708731 224420 714870 244884 718963 266712 720327 289905 718281 316508 712824 341746 703956 364939 691678 386767 675307 405866 656889 421555 635744 434516 611869 444748 583220 451569 549795 457026 510232 460437 465894 461801 234652 461801 234652 579809 450887 579809 491132 580491 525921 582538 554570 585948 577080 591405 600273 599591 620737 611187 638472 624829 652797 641201 663711 659618 671896 680082 676671 703274 678718 728513 676671 752387 672578 774898 665075 796044 654843 815825 641201 832879 625512 847885 607094 858799 586630 867667 560027 873806 525921 877899 484311 880628 434516 881992'   ,
              'C' : '821282 350614 953615 317190 928377 240109 894952 173261 853342 115962 803547 68213 746248 30696 683492 4093 614598 -12278 539563 -17053 462483 -12960 392906 -682 330832 19782 276262 48431 228513 84584 186903 128922 151432 180082 122101 239427 98909 302865 82538 368349 72306 436562 69577 507503 72988 582538 83902 653479 102319 718963 128922 779673 161664 834243 201228 881992 246930 922237 298772 956344 355389 982265 414734 1001364 476808 1012960 541610 1017053 613233 1012278 679400 997954 739427 974079 793997 940655 841064 898363 880628 848568 912005 790587 936562 725784 806276 695089 786494 745566 763302 789222 736016 825375 705321 854025 669850 875171 630286 890859 586630 900409 538881 903820 482947 899727 432469 889495 386767 872442 345839 848568 309686 818554 279673 783765 255798 744202 237381 699864 223056 652797 213506 605048 207367 556617 206003 508186 208049 446112 214870 388131 226467 334243 242838 285130 263984 240109 290587 201910 321965 169168 358799 143247 398363 122101 439973 107776 483629 98909 528649 96180 581855 99591 630969 111869 675989 131651 716917 160300 751705 195771 781037 239427 804229 291269 821282 350614',
              'D' : '240109 881992 240109 1000000 452251 1000000 506821 998636 554570 995907 595498 991814 630286 985675 671214 973397 709413 957708 744884 937926 776944 914052 813779 877899 845839 837653 872442 792633 894952 742838 912005 688950 924284 631651 931787 570259 934516 505457 932469 449523 927694 397681 919509 348568 907913 303547 893588 261255 877217 223056 859482 188267 839700 157572 817872 130286 796044 105730 772169 84584 748295 66849 722374 51160 693724 37517 662347 25921 628922 17053 592769 9550 553888 4093 512278 682 468622 0 107776 0 107776 1000000 240109 1000000 240109 881992 240109 118008 453615 118008 500000 118690 541610 122101 577763 128240 608458 136426 635061 145975 658936 158254 680082 171896 698499 188267 720327 213506 740109 242838 757162 276262 771487 314461 783083 356071 791269 402456 796044 452933 798090 507503 794679 581173 785130 645975 768759 701228 746248 748295 718963 786494 688950 818554 656207 843111 621419 861528 590723 870396 551842 876535 504775 880628 450205 881992',
              'E' : '110505 0 110505 1000000 833561 1000000 833561 881992 242838 881992 242838 575716 796044 575716 796044 458390 242838 458390 242838 118008 856753 118008 856753 0',
              'F' : '114598 0 114598 1000000 789222 1000000 789222 881992 246930 881992 246930 572306 716235 572306 716235 454297 246930 454297 246930 0',
              'G' : '575716 392224 575716 509550 999318 510232 999318 139154 949523 102319 899727 70941 849250 43656 798090 21828 745566 4775 693042 -7503 639154 -15007 585266 -17053 512960 -13643 444065 -1364 378581 17735 317190 45703 260573 80491 211460 122783 169850 171896 135744 228513 108458 289905 89359 354707 77763 422920 74352 495225 77763 566849 89359 635744 108458 702592 135061 767394 168486 826739 209413 877899 256480 920873 311050 955662 370396 982265 433834 1001364 502046 1012960 575034 1017053 627558 1014325 678035 1008186 725784 996589 770805 981583 812415 961801 849250 939291 881310 913370 908595 884038 931787 849932 952251 811733 969304 768076 984311 720327 864939 687585 852660 723738 839700 755798 824693 783765 809004 807640 789905 828104 768076 846521 742156 862892 713506 877217 681446 888813 648022 896999 612551 901774 575716 903820 531378 901774 491132 896317 452933 887449 418827 875853 386767 860846 358799 843793 333561 824693 311733 803547 292633 780355 275580 755798 261255 730559 248977 704638 231924 656889 220327 607776 212824 556617 210778 503411 213506 439291 221692 380628 236016 327422 256480 279673 281719 237381 313097 201228 349250 170532 390859 145975 435198 126876 481583 113233 528649 105048 577763 102319 620055 104366 662347 110505 703956 120737 745566 135061 783765 151432 817190 169168 845839 186903 869714 206003 869714 392224',
              'H' : '111869 0 111869 1000000 244202 1000000 244202 589359 763984 589359 763984 1000000 896317 1000000 896317 0 763984 0 763984 471351 244202 471351 244202 0',
              'I' : '130286 0 130286 1000000 262619 1000000 262619 0',
              'J' : '40246 283765 159618 300136 163711 246930 172578 203274 185539 168486 202592 143247 223056 124147 247613 111187 276262 103001 308322 100955 332196 102319 354707 106412 375171 113233 394270 123465 410641 135744 424284 150068 435198 166439 444065 185539 449523 208049 454297 236698 456344 270805 457708 311050 457708 1000000 590041 1000000 590041 318554 587995 259209 581855 206685 572306 161664 559345 124147 541610 91405 519782 63438 493861 38881 463165 19100 428377 2729 391542 -8186 351296 -15007 309004 -17053 246930 -12960 192360 1364 145975 25239 107094 58663 76398 100955 55252 152797 42974 213506 40246 283765',
              'K' : '102319 0 102319 1000000 234652 1000000 234652 504093 731241 1000000 910641 1000000 491132 594816 929059 0 754434 0 398363 506139 234652 346521 234652 0',
              'L' : '102319 0 102319 1000000 234652 1000000 234652 118008 727149 118008 727149 0',
              'M' : '103683 0 103683 1000000 302865 1000000 539563 291951 554570 245566 567531 205321 578445 171214 587312 143929 596862 173943 609141 210778 623465 254434 640518 304229 879945 1000000 1057981 1000000 1057981 0 930423 0 930423 836971 639836 0 520464 0 231241 851296 231241 0',
              'N' : '106412 0 106412 1000000 242156 1000000 767394 214870 767394 1000000 894270 1000000 894270 0 758527 0 233288 785812 233288 0',
              'O' : '445430 1008868 546385 1017735 547067 1017687 547067 903820 478854 897681 416098 879263 358117 849250 304911 806958 260573 750341 229195 678035 210095 589359 203956 484993 209413 399045 227831 323329 257844 256480 300819 199864 352660 154161 410641 122101 474761 102319 545020 96180 615962 102319 680764 122101 738745 154843 790587 201228 832879 259209 862892 328104 881310 407913 887449 499318 884720 557981 876535 613233 863574 664393 845839 712142 822647 755116 794679 792633 761937 825375 725102 853342 684175 875171 640518 890859 594816 900409 547067 903820 547067 1017687 613915 1012960 678035 1000682 738745 980218 796044 951569 847885 914734 893588 871760 932469 822647 965211 766712 990450 705321 1008868 640518 1019782 571623 1023874 498636 1019782 424284 1008186 354025 989086 287858 962483 226467 928377 169850 888131 120737 841064 78445 788540 44338 730559 17053 671214 -2046 609141 -13643 545703 -17053 476808 -12960 412005 0 350614 21146 293315 51160 240791 87995 195089 131651 156207 181446 124829 237381 99591 296726 81855 358799 70941 421555 67531 487040 75716 604366 100955 708731 142565 799454 201228 876535 272851 937926 354025 982265',
              'P' : '240109 881992 240109 1000000 484993 1000000 531378 999318 572306 997271 607776 994543 637108 990450 671896 982265 704638 972033 733970 959072 760573 943383 783765 924284 804911 901774 824011 875853 840382 847203 853342 815143 862892 781719 869031 746930 871078 710778 865621 649386 850614 592769 825375 540928 789905 494543 740791 455662 675989 428377 594134 412005 496589 406548 240109 406548 240109 0 107776 0 107776 1000000 240109 1000000 240109 881992 240109 524557 498636 524557 557981 527285 607776 536153 648704 551160 680764 572306 703956 598226 721010 629604 731241 665757 734652 706685 732606 736698 726467 764666 716235 789905 702592 813779 685539 834243 665757 850614 643929 863574 619372 873124 598909 876535 571623 879263 536835 881310 495907 881992',
              'Q' : '407913 1001364 471351 1013643 538881 1017735 539563 1017687 539563 903820 468622 896999 403820 877899 345839 846521 293997 802183 251023 744884 220327 675989 201910 594134 196453 500000 201910 407913 220327 327422 250341 257844 292633 200546 343793 154843 402456 122101 467258 102319 539563 96180 574352 97544 608458 102319 641201 110505 673261 122783 641201 141201 609141 156889 575716 169850 542292 180082 574352 276262 628922 257844 678718 236016 723056 210095 763302 180764 813779 240109 850614 313779 872442 400409 879945 500682 877217 559345 869031 613915 856071 665075 838336 712824 815143 755116 787176 793315 754434 825375 717599 853342 676671 875171 633015 890859 587312 900409 539563 903820 539563 1017687 606412 1012960 670532 1000682 731241 980218 788540 951569 840382 915416 886085 872442 924966 823329 957708 767394 982947 706003 1001364 641201 1012278 572988 1016371 500682 1013643 439973 1006821 383356 995225 328786 978854 278308 957708 230559 931787 186221 901091 144611 865621 107094 910641 77080 953615 51842 995225 30696 1035471 14325 996589 -77763 942701 -55935 888813 -27967 834925 5457 781719 45020 724420 17735 664393 -2046 601637 -13643 536153 -17053 469304 -12960 406548 -682 346521 19782 289905 48431 237381 83902 191678 126876 152115 175989 119372 232606 92769 293315 74352 358799 63438 427012 60027 500000 63438 572306 75034 641201 93452 706685 120055 769441 152797 826057 192360 875853 238063 918827 290587 954297 347203 981583',
              'R' : '242156 889495 242156 1000000 553206 1000000 615962 997954 670532 993179 717599 984311 756480 972715 789222 956344 818554 935198 844475 909277 867667 877899 885402 842428 898363 805593 906548 767394 909277 727149 904502 675989 891542 628922 870396 585948 840382 547749 800819 514325 752387 487722 694407 467940 627558 454980 652115 442019 673261 429741 691678 417462 707367 405184 735334 376535 763302 345157 790587 310368 817190 272169 991132 0 824693 0 692360 208049 664393 250341 639154 287176 616644 319236 596862 345839 578445 367667 560709 386085 544338 401091 529332 412688 514325 420873 499318 428377 484311 434516 469304 439291 455662 441337 439291 442701 418827 443383 395634 444065 242156 444065 242156 0 109823 0 109823 1000000 242156 1000000 242156 889495 242156 558663 526603 558663 568895 559345 607094 562756 639836 568895 668486 577080 692360 587995 713506 601637 731241 618008 746248 637108 757844 658254 766030 680082 770805 703274 772851 727149 769441 760573 759891 791269 743520 819236 721010 843793 691678 863574 654843 877899 610505 886085 558663 889495',
              'S' : ' 62756 321282 187585 332196 193042 296044 201910 263302 213506 233970 228513 208731 246930 185539 270123 165075 297408 146658 329468 130969 364256 118008 401774 108458 441337 103001 482947 101637 519100 103001 553888 107094 585948 113915 616644 124147 643247 136426 667121 150750 686221 167121 702592 185539 714870 205321 723738 226467 729195 248295 731241 271487 729195 293997 724420 315143 715553 334925 703956 353342 687585 369714 667804 385402 642565 399727 613915 412688 587312 421555 549113 432469 498636 445430 435880 461119 371760 477490 318554 493179 275580 508868 242838 523874 208731 543656 180082 565484 155525 590041 135744 616644 120055 645293 109141 675307 103001 707367 100955 741473 103001 778308 111187 814461 124829 849250 143929 882674 167804 913370 196453 940655 230559 963847 269441 982947 311733 997271 356071 1008186 403138 1014325 452933 1017053 506821 1014325 557299 1007503 604366 996589 648704 980900 688267 960437 723738 936562 753752 907913 779673 875853 799454 839700 814461 801501 824011 760573 828786 718281 701910 708731 693724 753070 679400 791951 658936 824693 632333 851978 598909 873124 559345 888131 512278 896999 458390 900409 401774 896999 354025 888813 314461 875171 283083 856071 259209 832879 242156 807640 231924 779673 228513 750341 230559 724420 238063 701228 250341 680082 267394 661664 293997 643929 336289 626194 393588 607776 466576 590041 540928 572306 602319 555935 651432 540246 688267 526603 728513 504775 763984 480900 793315 453615 817190 424284 834925 392224 847885 358117 856071 321282 858799 282401 855389 242838 847203 204638 832879 167121 813097 131651 787176 98226 757162 68895 721692 42974 681446 21828 637108 4775 590723 -7503 540928 -15007 489086 -17053 423602 -15007 364256 -7503 309686 4775 261255 22510 217599 44338 179400 71623 145975 103683 117326 141201 94134 182128 77763 225784 66849 272169 62756 321282',
              'T' : '362210 0 362210 881992 32742 881992 32742 1000000 825375 1000000 825375 881992 494543 881992 494543 0',
              'U' : '763984 1000000 896317 1000000 896317 422237 893588 350614 887449 286494 876535 230559 862210 182810 841064 140518 813779 102319 779673 68213 738745 38199 690314 13643 635744 -3411 573670 -13643 505457 -17053 437926 -14325 377217 -5457 323329 9550 275580 31378 233970 57981 198499 90041 169850 127558 148022 171214 130969 221010 119372 279673 111869 346521 109823 422237 109823 1000000 242156 1000000 242156 422920 243520 361528 247613 309686 255116 265348 266030 230559 280355 201228 298772 175989 321965 154161 349250 135744 379945 120737 414734 110505 452251 104366 493861 102319 561392 106412 618690 118690 665075 139154 701910 168486 728513 208731 748295 264666 759891 336289 763984 422920',
              'V' : '393588 0 6139 1000000 149386 1000000 409277 273533 424284 230559 437926 188950 450205 148704 461801 109823 473397 150750 486357 191678 500682 232606 515689 273533 785812 1000000 920873 1000000 529332 0',
              'W' : '282401 0 17053 1000000 152797 1000000 304911 344475 316508 292633 327422 241473 337653 190314 347203 139836 364256 211460 377217 266030 386767 303547 392224 324693 582538 1000000 742156 1000000 885402 493861 909959 401091 931787 311050 948840 223738 963165 139836 973397 188950 984993 241473 997954 297408 1012960 357435 1169850 1000000 1302865 1000000 1028649 0 901091 0 690314 761937 678035 804911 669168 839018 662347 863574 658936 879263 650750 845839 643247 815143 636426 787176 629604 761937 417462 0',
              'X' : '6139 0 392906 521146 51842 1000000 209413 1000000 390859 743520 416780 705321 439291 672578 457026 643929 471351 620737 488404 648022 507503 675989 527967 704638 550477 734652 751705 1000000 895634 1000000 544338 528649 922920 0 759209 0 507503 356753 496589 372442 485675 388813 474761 405866 463847 423602 448158 398363 435198 377217 424284 360846 416098 348568 165075 0',
              'Y' : '389495 0 389495 423602 4093 1000000 165075 1000000 362210 698499 388813 656207 414734 613915 439291 571623 463847 529332 487040 569577 513643 612551 541610 657572 572988 706003 766712 1000000 920873 1000000 521828 423602 521828 0',
              'Z' : '27967 0 27967 122783 540246 763302 566849 796044 593452 826739 618690 855389 643929 881992 85948 881992 85948 1000000 802183 1000000 802183 881992 240791 188267 180082 118008 818554 118008 818554 0',
              '0' : '382674 1003987 384038 1004093 422920 1002046 459072 995907 493179 985675 525239 971351 553888 952933 580491 931787 604366 906548 625512 877899 643929 845839 660300 810368 674625 771487 687585 729195 697135 681446 703956 626194 708049 563438 710095 493179 707367 409277 700546 333561 689632 266712 673943 208731 653479 157572 628240 112551 598909 73670 565484 41610 527285 15689 484311 -2729 436562 -13643 384038 -17053 315143 -10914 254434 8868 201910 40928 156889 86630 113233 158254 82538 250341 64120 361528 57981 493179 60027 577080 66849 652797 77763 719645 94134 778308 114598 828786 139154 873806 168486 912688 202592 945430 240791 970668 283765 989086 331514 1000000 382674 1003987 382674 902456 342428 897681 306276 884038 274898 861528 247613 830832 219645 774898 199864 700546 187585 606412 184175 493179 187585 379945 198499 287858 216235 216235 241473 165075 271487 128922 305593 103683 343111 88677 384038 83902 424284 88677 461801 104366 495225 129604 525921 165757 551160 216917 568895 288540 579809 380628 583902 493179 579809 605730 568895 698499 551160 770123 525921 821282 495225 856753 461119 881992 423602 896999 382674 902456',
              '1' : '520464 0 397681 0 397681 782401 373124 761255 345839 740109 315143 718963 281037 697817 245566 677353 212824 660300 181446 645975 152115 634379 152115 753070 201910 778308 248295 806276 291951 836971 332196 870396 367667 904502 397681 937926 422237 971351 441337 1004093 520464 1004093',
              '2' : '703274 118008 703274 0 42292 0 42292 21828 45020 42974 49795 64120 56617 85266 70941 118690 89359 152115 111187 184857 137108 218281 167804 251705 205321 288540 248295 327422 298090 369714 372442 432469 434516 489086 482947 538199 518417 581173 542974 619372 561392 656889 571623 693724 575716 729195 572306 763984 562074 796044 545703 825375 523192 851978 495225 873806 463165 889495 427012 899045 387449 902456 345157 899045 307640 888813 274216 872442 245566 849250 221692 819918 205321 785812 195089 746248 191678 701910 65484 714870 76398 781037 96180 839018 124829 888131 163029 929741 208731 961801 261937 984993 321965 999318 390177 1004093 458390 998636 519100 983629 572306 959072 618008 924284 654161 881992 680764 834925 696453 783083 701910 726467 699864 696453 695771 666439 687585 637108 677353 608458 663029 578445 644611 548431 622101 517735 595498 486357 562074 450887 519782 409959 467940 362892 406548 310368 356071 267394 315825 231924 285130 203956 264666 184175 249659 167121 236016 150750 223738 134379 212824 118008',
              '3' : ' 58663 263984 181446 280355 193724 231241 209413 190314 229195 156207 253070 129604 279673 109141 309686 94816 341746 86630 377217 83902 418827 87312 457026 98909 491814 117326 523192 143929 549113 175307 568213 210778 579127 249659 583220 292633 579127 332879 568895 369714 551842 402456 527967 431787 497954 455662 465211 472715 427694 482947 387449 487040 368349 485675 347885 483629 325375 478854 300819 473397 314461 581173 319918 580491 325375 579809 330150 579809 334243 579809 372442 581855 408595 590041 442701 602319 475443 620737 502729 643929 522510 672578 534106 706685 538199 746930 534789 778990 526603 808322 512278 834925 492497 858799 467940 877899 439973 891542 408595 899727 374488 903138 339700 899727 308322 891542 280355 877217 255116 858117 233288 832196 215553 801501 202592 764666 193724 723056 70941 744884 85266 802865 107776 854025 136426 898363 173261 935880 215553 965211 262619 987040 314461 999318 371760 1004093 411323 1001364 450205 995225 487040 983629 522510 968622 554570 949523 583220 927012 607094 901774 627558 873124 643247 841746 654843 810368 661664 777626 664393 744202 661664 712142 655525 682128 644611 653479 629604 626194 609823 600955 585948 578445 557981 558663 526603 541610 568213 527967 605048 509550 637108 485675 664393 456344 685539 422237 701228 384038 710095 341746 713506 295362 707367 231924 689632 173943 659618 120737 618008 72988 566849 32742 509550 4775 446112 -12278 376535 -17735 313097 -12960 255798 1364 203956 25921 157572 60709 118690 102319 89359 150750 68895 203956 58663 263984',
              '4' : '451569 968035 474079 1000000 574352 1000000 574352 351978 709413 351978 709413 239427 574352 239427 574352 0 451569 0 451569 239427 17735 239427 17735 351978 451569 968035 451569 802865 138472 351978 451569 351978 451569 802865',
              '5' : '57981 261937 186903 272851 195771 228513 210095 190314 229195 157572 253070 130969 280355 109823 310368 95498 343111 86630 379263 83902 421555 87995 461119 100273 496589 121419 529332 150750 555935 186903 575034 228513 586630 275580 590723 328104 586630 377217 575716 421555 557299 460437 531378 493861 499318 519782 463165 538881 422237 550477 377217 554570 347885 552524 320600 547749 294679 538881 270123 527285 246930 512960 227149 496589 209413 478172 195089 457708 79809 472715 176671 986357 673943 986357 673943 869031 274898 869031 221010 600273 266030 627558 313097 647340 360846 658936 409959 663029 472715 656889 530696 639836 583220 611869 630969 572306 669850 523192 698499 468622 714870 406548 721010 339018 715553 272851 701228 212142 675989 155525 641883 104366 589359 51160 527967 12960 457708 -9550 379263 -17053 313779 -12278 255116 2046 202592 25921 156207 59345 117326 100273 88677 148022 68213 201910 57981 261937',
              '6' : '335607 996589 411323 1004093 467258 999318 518417 987040 564120 966576 604366 937926 637790 901091 664393 858799 683492 809686 695089 755116 572988 745566 563438 778990 553206 807640 540246 831514 526603 850614 500000 873124 470668 889495 438608 899727 403820 903138 375171 901091 348568 894952 323329 884720 300819 870396 272851 846521 248977 817872 227149 784447 209413 746930 194407 701910 183492 648022 176671 585948 174625 515689 197817 547067 223738 574352 251705 596862 283083 615962 315143 630286 348568 640518 382674 646658 392906 647260 392906 540246 352660 536153 315825 525239 281719 506139 251705 480218 225784 448158 208049 411323 197135 369714 193724 324011 195089 292633 199864 261937 208049 231924 220327 202592 234652 175307 252387 151432 272851 130969 296044 113915 319918 100273 345157 91405 371078 85266 397681 83902 435198 87312 469986 99591 502046 118690 531378 146658 555252 180764 572988 220327 583220 266030 587312 317190 583220 365621 572988 409277 555935 447476 532060 480218 502046 506139 469304 525239 432469 536153 392906 540246 392906 647260 417462 648704 476126 642565 530696 625512 580491 597544 626194 557981 663711 509550 690996 454297 707367 392906 712824 324693 710095 278308 702592 233288 689632 190314 671896 149386 649386 111187 623465 77763 594134 49113 560709 25921 523874 6821 484993 -6821 443383 -15007 399727 -17053 326057 -10232 259891 10914 201228 45703 149386 95498 106412 160982 76398 244884 57981 347203 52524 467940 58663 603001 79127 718281 112551 813779 159618 889495 210095 939291 268759 975443',
              '7' : '66166 869031 66166 987040 713506 987040 713506 891542 665757 836289 618008 772851 570941 701228 523874 621419 479536 536153 440655 450205 407231 362892 379263 274898 362210 210095 348568 143247 338336 72988 332196 0 206003 0 209413 62074 218281 130286 232606 204638 252387 285130 276944 367667 306276 448840 340382 528649 379263 607094 420873 681446 464529 750341 509550 812415 555935 869031',
              '8' : ' 321965 999318 384038 1004093 385402 1003988 385402 903138 351296 899727 320600 891542 293315 877217 268759 858117 248295 834243 233970 808322 225102 780355 222374 750341 225102 716235 233288 685539 247613 658254 268076 634379 292633 614598 320600 600273 351978 592087 383356 589626 383356 489086 341746 484993 303547 474761 269441 456344 239427 431787 214188 401091 196453 366985 186221 329468 182810 288540 184175 261937 188950 236698 196453 211460 207367 186903 221010 163711 238063 143247 258527 125512 281719 110505 306276 98226 332196 90041 359482 85266 387449 83902 429059 87312 467258 97544 502046 115280 532742 140518 557299 170532 575716 204638 585948 242156 590041 284447 585948 326739 575034 364939 556617 399727 530696 431105 499318 456344 464529 474079 425648 484993 383356 489086 383356 589626 386767 589359 420191 592087 450887 600273 478172 613915 502729 633697 522510 656889 536835 683492 545020 712142 548431 743520 545020 775580 536153 805593 521828 832196 501364 856753 476126 876535 448840 891542 418145 899727 385402 903138 385402 1003988 446112 999318 502046 984993 551160 961119 594816 927694 629604 887449 654161 843111 669168 794679 674625 742838 671896 708731 665075 677353 653479 648022 637790 621419 617326 596862 592087 575716 562074 557299 527285 542292 570259 524557 607776 502729 639836 476126 667121 445430 688267 409959 703274 371760 712142 330150 715553 285812 709413 223738 692360 167804 664393 115962 624829 70259 575716 32060 519782 4775 456344 -11596 386085 -17053 315143 -11596 252387 4775 195771 32060 147340 70259 107094 116644 79127 168486 62074 225784 56617 289222 59345 335607 68895 378581 83902 417462 105730 452251 133015 482265 165757 507503 203274 527285 246930 542292 210778 557299 180082 575716 154161 597544 133697 622101 117326 648704 105730 678718 98909 710778 96862 746248 101637 798090 115962 846521 140518 890177 175307 929741 217599 961801 266712 984993',
              '9' : '307640 997954 372442 1004093 387449 1003005 387449 902456 347203 897681 310368 885402 276262 864256 244884 835607 218281 799454 199181 758527 187585 712824 184175 662347 187585 616644 198499 575716 216235 538881 241473 506821 271487 480218 305593 461801 343111 450887 384038 447476 424284 450887 461119 461801 494543 480218 523874 506821 547749 539563 564802 577763 575034 622101 579127 672578 575034 722374 564802 767394 547067 806276 522510 840382 492497 866985 460437 886767 424966 898363 387449 902456 387449 1003005 419509 1000682 465211 990450 508868 974079 550477 951569 587995 922237 621419 887449 649386 847203 673261 801501 691678 747613 704638 682810 712824 607094 715553 520464 712824 429059 704638 347885 691678 276262 673943 214870 650068 160982 622101 114598 587995 75034 549795 42292 506821 15689 460437 -2729 410641 -13643 357435 -17053 300819 -13643 250341 -1364 205321 19100 165757 47749 131651 83220 105730 126194 87312 175307 76398 231241 194407 242156 203274 203274 216235 169850 231924 142565 251705 121419 274216 104366 299454 92769 328104 85948 360164 83902 387449 85266 412688 90041 436562 98226 459072 109823 479536 123465 497954 139836 514325 158254 529332 178718 542292 201910 553888 229877 564802 260573 575034 296044 582538 332879 588677 370396 592087 407913 593452 446112 592769 450205 592769 470668 572306 442701 549113 417462 521828 394952 491814 375171 459072 358799 425648 347885 390177 341064 354025 339018 293997 344475 239427 361528 188950 389495 143929 429059 105730 477490 79127 533424 62756 596180 57981 666439 63438 738745 79809 803547 107776 860846 147340 911323 195089 951569 248295 980900',
              '.' : '126876 0 126876 139836 266712 139836 266712 0',
              '-' : '44338 300136 44338 423602 421555 423602 421555 300136',
              '=' : ['77763 587995 77763 702592 738063 702592 738063 587995', '77763 284447 77763 399045 738063 399045 738063 284447']
}

    def charpoly(self, char):
        charstr = text.char00[char]
        if type(charstr) == list:
            self.charxy = [None]*len(charstr)
            charxyflat = [None]*len(charstr)
            charxy = [None]*len(charstr)
            size = [None]*len(charstr)
            self.width = [None]*len(charstr)
            for i, chi in enumerate(charstr):
                charxyflat[i] = np.array(map(int, chi.split()))
                size[i] = len(charxyflat[i])/2
                charxy[i] = charxyflat[i].reshape((size[i], 2))
                self.charxy[i] = (charxy[i] * float(self.height)/text.height00/gg.scale).transpose()
                self.width[i] = np.max(self.charxy[i][0]) - np.min(self.charxy[i][0])
            self.width = max(self.width)
        else:
            charxyflat = np.array(map(int, charstr.split()))
            size = len(charxyflat)/2
            charxy = charxyflat.reshape((size, 2))
            self.charxy = (charxy * self.height/text.height00/gg.scale).transpose()
            self.width = np.max(self.charxy[0]) - np.min(self.charxy[0])
        return self.charxy

if __name__ == '__main__':
    from essentials import introScript, outroScript
    name = 'texttest.cif'
    introScript()
    xy = [0,0]
    test = text(1, 'AB')
    print gg.s
    outroScript()
#    print test.charpoly('A')